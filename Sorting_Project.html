<html>
    <head>
        <script>
            var randomsize=[];
            var X,Y,height,width,arraysize,canvas,ctx;
            var i,min_idx,j;
            var flag=true;
            var req;

            function draw()
            {
                arraysize=document.getElementById('arraysize').value;
                canvas=document.getElementById('myCanvas');
                ctx=canvas.getContext('2d');
                ctx.fillStyle="red";
                for(i=1;i<=arraysize;i++)
                {
                X=(canvas.width-100)/arraysize*i;
                Y=50;
                width=(canvas.width-100)/arraysize;
                height=Math.floor((Math.random() * (canvas.height)) + 1);;
                randomsize[i-1]=height;
                ctx.fillStyle="red";
                ctx.fillRect(X+1,Y,width-1,height);
                }
            }

            function reset()
            {
                canvas=document.getElementById('myCanvas');
                ctx=canvas.getContext('2d');
                ctx.fillText("clear",100,100);
                ctx.clearRect(0,0,canvas.width,canvas.height);
            }
            
            function onsort()
            {
                arraysize=document.getElementById('arraysize').value;
                canvas=document.getElementById('myCanvas');
                ctx=canvas.getContext('2d');
                
                for (i = 0; i < randomsize.length; i++)  
                {  
                    min_idx = i;  
                    for (j = i+1; j < randomsize.length; j++)  
                    {
                        beforecolor();
                        //sleep(200);
                        aftercolor();
                    }
                    comingout();
                } 
            }

            function sleep(miliseconds) {
            var currentTime = new Date().getTime();

            while (currentTime + miliseconds >= new Date().getTime()) {
            
            }
            }

            function beforecolor()
            {
                X=(canvas.width-100)/arraysize*(j+1);
                Y=50;
                width=(canvas.width-100)/arraysize;
                ctx.fillStyle="green";
                ctx.fillRect(X+1,Y,width-1,randomsize[j]);
           }

            function aftercolor()
            {
                X=(canvas.width-100)/arraysize*(j+1);
                Y=50;
                width=(canvas.width-100)/arraysize;
                if (randomsize[j] <= randomsize[min_idx])  
                        min_idx = j;  
                
                ctx.fillStyle="red";
                
                ctx.fillRect(X+1,Y,width-1,randomsize[j]);
                
            }
            
            function comingout()
            {
                var temp=randomsize[i];
                randomsize[i]=randomsize[min_idx];
                randomsize[min_idx]=temp;
                X=(canvas.width-100)/arraysize*(i+1);
                Y=50;
                width=(canvas.width-100)/arraysize;
                ctx.fillStyle="pink";
                ctx.clearRect(X,Y-1,width+1,randomsize[min_idx]+2);
                ctx.fillRect(X+1,Y,width-1,randomsize[i]);
                X=(canvas.width-100)/arraysize*(min_idx+1);              
                if(i!=min_idx)
                ctx.fillStyle="red";
                ctx.clearRect(X,Y-1,width+1,randomsize[i]+2);
                ctx.fillRect(X+1,Y,width-1,randomsize[min_idx]);
            }

        </script>
    </head>

    <body align="center">

        <label for="arraysize">Size</label>
        <input type="number" id="arraysize" name="arraysize"><br>
        <input type="button" id="submit" name="submit" onclick="draw()" value="submit" >
        <input type="button" id="clear" name="clear" onclick="reset()" value="clear" ><br>
        <input type="button" id="sort" name="sort" onclick="onsort()" value="sort" ><br>
        <canvas id="myCanvas" height="600" width="900">
        </canvas>
    
    </body>
</html>